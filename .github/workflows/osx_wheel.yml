name: Build Wheels ON OSX

on: [push]

env:
   PYPI_API_TOKEN:${{secrets.PYPI_API_TOKEN}}
   
jobs:
  build:

    runs-on: ubuntu-18.04
    steps:
    - uses: actions/checkout@v2
    - name: Configure
      env:
        PYMOOSE_PYPI_PASSWORD: ${{ secrets.PYMOOSE_PYPI_PASSWORD }}
      run: |
         sudo apt-get update && sudo apt upgrade
         sudo apt-get install python3-pip
         sudo apt-get install python3-dev python3-pip python3-venv python3-wheel -y
         pip3 install wheel
         pip3 install auditwheel-symbols
          
    - name: Build wheels
      run: |
        ./build_wheels_linux.sh $PYPI_API_TOKEN

